// ==UserScript==
// @name         Enter The Cloud - Game v2
// @namespace    https://schul-cloud.org/
// @version      0.2
// @description  A Onboarding Game for the HPI SchulCloud
// @author       Dennis Doerk
// @match        https://schul-cloud.org/*
// @grant        none
// ==/UserScript==

(function () {
    'use strict';
    //Global Variables
    let $ = typeof unsafeWindow != 'undefined' ? unsafeWindow.$ : window.$;
    let isGameRunning = (sessionStorage.getItem('isEnterTheCloudRunning') == "yes");

    //Global Styles
    //adds blink
    var style = document.createElement('style');
    style.innerHTML = `
    #hacker_textchat{
      position: relative;
    }
  #hacker_textchat::after {
    content:'';
    display:inline-block;
    margin-left:3px;
    background-color:green;
    animation-name:blink;
    animation-duration:0.5s;
    animation-iteration-count: infinite;
  }
  p#hacker_textchat::after {
    height: 23px;
    position: absolute;
    width: 10px;
  }

  @keyframes blink {
    0% {
      opacity:1;
    }
    49% {
      opacity:1;
    }
    50% {
      opacity:0;
    }
    100% {
      opacity:0;
    }
  }

input.btn-secondary {
margin-right: 5px;
}
#quiz .btn {
    white-space: normal;
    margin-bottom: 5px;
}


#quiz .buttons {
    display: flex;
    flex-direction: column;
}

div#infofooterwrapper {
    position: fixed;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 11;
    max-width: 800px;
    margin: auto;
    left: 0;
    right: 0;
}

div#infofootercontainer {
    max-width: 800px;
    padding: 17px;
    background: white;
    width: 100%;
    border-radius: 15px 15px 0 0;
    border: 7px solid #b10438;
    font-weight: bold;
    text-align: center;
    font-size: 17px;
}
    `;
    document.head.appendChild(style);

    //Global Functions

    let startGame = () => {
        isGameRunning = true;
        console.log("game start");
        sessionStorage.setItem('isEnterTheCloudRunning', "yes");
        //TODO
        sessionStorage.setItem('enterTheCloudGameStage', 1);
        main();
    }

    let deleteEditButtons = () => {
        if ($("button.add-filter").length) {
            $("button.add-filter").remove()
        }

        if ($("a.create").length) {
            $("a.create").remove()
        }

        if ($("a.btn-delete").length) {
            $("a.btn-delete").remove()
        }

        if ($("a.btn-edit").length) {
            $("a.btn-edit").remove()
        }

        if ($("span.create-directory").length) {
            $("span.create-directory").remove()
        }

        if ($("span.new-file").length) {
            $("span.new-file").remove()
        }

        if ($("div.action-group").length) {
            $("div.action-group").remove()
        }

        if ($(".folder > a").length) {
            $(".folder > a").remove()
        }

        if ($(".openFile .card-text").length) {
            $(".openFile .card-text").remove()
        }

        if ($(".section-course .col-sm-6 > a").length) {
            $(".section-course .col-sm-6 > a").remove()
        }
        if ($('h1#page-title').text().match("Dein Account")) {
            document.getElementsByTagName("form")[0].addEventListener("submit", function (evt) {
                evt.preventDefault();
                return false;
            }, false);
        }
        if ($('h1#page-title').text().match("N√§chste Schritte")) {
            document.getElementsByClassName("submissionForm")[0].addEventListener("submit", function (evt) {
                evt.preventDefault();
                return false;
            });
        }

        if ($('.form-upload').length) {
            let newDropzone = $('.form-upload');
            newDropzone.each(function () {
                let dropzoneControl = $(this)[0].dropzone;
                if (dropzoneControl) {
                    dropzoneControl.destroy();
                }
            });
        }
    }

    let doOverlayDarken = (darken) => {
        $('#enterwrapper').css('background-color', darken ? 'rgba(0,0,0,0.8)' : 'none');
    }

    let addOverlay = (darken = false) => {
        if (!$("#enterwrapper").length) {
            $('body').append("<div  id=\"enterwrapper\" style=\" position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 11;\"><div id=\"entercontainer\" style=\" display: flex; justify-content: center; align-items: center; height: 100%; position: relative;\"></div></div>");
            doOverlayDarken(darken);
        }
    }

    let removeOverlay = () => {
        $("#enterwrapper").remove();
    }

    let addCloudyDialog = () => {
        if (!$("#cloudydialog").length) {
            $('#entercontainer') ? $('#entercontainer').append("<div id=\"cloudydialog\" style=\" max-width: 500px; display: flex; flex-direction: column; width: 100%;  background-color: #fff;  border: 1px solid rgba(0,0,0,.2); border-radius: .3rem; outline: 0; z-index: 12;\"><div class=\"modal-header\"> <h5 class=\"modal-title\">Nachricht von Cloudy</h5> </div> <div class=\"modal-body\"> <p id=\"cloudymessage\"></p> </div><div class=\"modal-footer\"></div></div>") : null;
        }
    }
    let removeCloudyDialog = () => {
        $("#cloudydialog").remove();
    }

    let addCloudyDialogText = (text = 'textfehlt') => {
        $(".modal-body p").multiline(text);
    }
    let addCloudyDialogPrimaryButton = (text = 'textfehlt') => {
        if (!$("#entercontainer input.btn-primary").length) {
            $('#entercontainer .modal-footer').append("<input type=\"button\" class=\"btn btn-primary\">")
        };
        $("#entercontainer input.btn-primary").val(text)
    }
    let addCloudyDialogSecondaryButton = (text = 'textfehlt') => {
        if (!$("#entercontainer input.btn-secondary").length) {
            $('#entercontainer .modal-footer').append("<input type=\"button\" class=\"btn btn-secondary\">")
        };
        $("#entercontainer input.btn-secondary").val(text)
    }
    let removeCloudyDialogPrimaryButton = () => {
        $(" #entercontainer input.btn-primary").remove();
    }
    let removeCloudyDialogSecondaryButton = () => {
        $(" #entercontainer input.btn-secondary").remove();
    }

    let addInfoFooter = (text) => {
        if (!$("#infofooterwrapper").length) {
            $('body').append("<div id=\"infofooterwrapper\"><div id=\"infofootercontainer\"><p></p></div></div>");
        }
        $('#infofootercontainer p').text(text);
    }
    let removeInfoFooter = () => {
        $('#infofooterwrapper').remove();
    }



    $.fn.multiline = function (text) {
        this.text(text);
        this.html(this.html().replace(/\n/g, '<br/>'));
        return this;
    }
    let typeWriter = (txt, i) => {
        if (i < txt.length) {
            if (txt.charAt(i) === '~') {
                document.getElementById("hacker_textchat").innerHTML += '<br>\n';
            } else {
                document.getElementById("hacker_textchat").innerHTML += txt.charAt(i);
            }

            setTimeout(typeWriter, 100, txt, ++i);
            if (i == txt.length) {
                if (sessionStorage.getItem('enterTheCloudGameStage') == "3") {
                    setTimeout(function () {
                        $('#enterwrapper').remove();
                        nextGameStage(4);
                    }, 4000);
                } else if (sessionStorage.getItem('enterTheCloudGameStage') == "13") {
                    setTimeout(function () {
                        $('#enterwrapper').remove();
                        nextGameStage(14);
                    }, 4000);
                }

            }
        }
    }
    let hackerWriting = (txt) => {
        var i = 0;
        document.getElementById("hacker_textchat").innerHTML = "";
        typeWriter(txt, i)
    }

    let nextGameStage = (nextStage) => {
        sessionStorage.setItem('enterTheCloudGameStage', nextStage);
        main();
    }
    //GameStart

    let hackerImageData = "data:image/png;base64,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"
    let main = () => {
        if (!isGameRunning) startGame();
        let gameStage = sessionStorage.getItem('enterTheCloudGameStage');
        deleteEditButtons();
        if (gameStage === "1") {
            addOverlay();
            addCloudyDialog();
            addCloudyDialogText("Hi und willkommen in der HPI Schul-Cloud. üòä Mein Name ist Cloudy - ich bin dein Kontakt f√ºr das HPI Schul-Cloud-System.\n \n Gemeinsam schreiben wir heute Geschichte. Der Schulalltag hat sich gravierend ver√§ndert und heute wird ein neuer Meilenstein gesetzt.");
            addCloudyDialogPrimaryButton('Weiter');
            $("input.btn.btn-primary").click(function () {
                addCloudyDialogText("Ich will dir die Funktionen der Cloud zeigen. Also lass uns erst einmal sehen, was du bis jetzt schon √ºber Clouds wei√üt. \n \n Starten wir daher erstmal mit einem kleinen Quiz! üòä");
                addCloudyDialogPrimaryButton('Quiz starten!');
                $("input.btn.btn-primary").unbind("click").click(function () {
                    addCloudyDialogText('');
                    removeCloudyDialogPrimaryButton();
                    $("input.btn.btn-primary").unbind("click");
                    nextGameStage(2);
                });
            });
        }
        if (gameStage == "2") {
            addOverlay();
            addCloudyDialog();
            $('#cloudymessage').remove();
            $('#entercontainer .modal-body').append('<div id=\"quiz\"> <p id=\"question\"></p> <div class=\"buttons\"> <button id=\"btn0\" class=\"btn\"><span id=\"choice0\"></span></button> <button id=\"btn1\" class=\"btn\"><span id=\"choice1\"></span></button><button id=\"btn2\" class=\"btn\"><span id=\"choice2\"></span></button></div> <hr><p id=\"progress\">Frage x von y</p> </div>');

            function Quiz(questions) {
                this.score = 0;
                this.questions = questions;
                this.questionIndex = 0;
                this.result = undefined;
            }

            Quiz.prototype.getQuestionIndex = function () {
                return this.questions[this.questionIndex];
            }

            Quiz.prototype.guess = function (answer) {
                if (this.getQuestionIndex().isCorrectAnswer(answer)) {
                    this.score++;
                    this.result = true;
                } else {
                    this.result = false;
                }
                this.lastCorrectAnswer = answer;
                this.lastAnswer = this.questions[this.questionIndex].answer;
                this.questionIndex++;
            }

            Quiz.prototype.isEnded = function () {
                return this.questionIndex === this.questions.length;
            }


            function Question(text, choices, answer) {
                this.text = text;
                this.choices = choices;
                this.answer = answer;
            }

            Question.prototype.isCorrectAnswer = function (choice) {
                return this.answer === choice;
            }


            function populate() {
                if (quiz.isEnded()) {
                    showScores();
                } else {
                    // show question
                    var element = document.getElementById("question");

                    if (quiz.result !== undefined) {
                        console.log(quiz.lastCorrectAnswer)
                        console.log(quiz.lastAnswer)
                        element.innerHTML = (quiz.result ? "<p style=\"color:green;\">Die Antwort '" + quiz.lastAnswer + "' war richtig!</p>" : "<p style=\"color:#b10438;\"> Die Antwort '" + quiz.lastCorrectAnswer + "' war falsch! Richtig w√§re'" + quiz.lastAnswer + "'gewesen.</p>") + quiz.getQuestionIndex().text;
                    } else {
                        element.innerHTML = quiz.getQuestionIndex().text;
                    }
                    // show options
                    var choices = quiz.getQuestionIndex().choices;
                    for (var i = 0; i < choices.length; i++) {
                        var element = document.getElementById("choice" + i);
                        element.innerHTML = choices[i];
                        guess("btn" + i, choices[i]);
                    }

                    showProgress();
                }
            };

            function guess(id, guess) {
                var button = document.getElementById(id);
                button.onclick = function () {
                    quiz.guess(guess);
                    populate();
                }
            };


            function showProgress() {
                var currentQuestionNumber = quiz.questionIndex + 1;
                var element = document.getElementById("progress");
                element.innerHTML = "Frage " + currentQuestionNumber + " von " + quiz.questions.length;
            };

            function showScores() {
                var gameOverHTML = quiz.score < 1 ? `<h6 id='score'> Dein Ergebnis:Du hast 1 Punkt erreicht.</h6>` : `<h6 id='score'>Du hast ${quiz.score} Punkte erreicht.</h6>`;
                if (quiz.score > 3) {
                    gameOverHTML += "<p>Wow, du wei√üt ja schon vieles √ºber Clouds! üí™ Ich will dir jetzt eine ganz besondere Cloud vorstellen: die HPI Schul-Cloud!</p>"
                } else if (quiz.score > 1) {
                    gameOverHTML += "<p>Du scheinst ja schon einiges √ºber Clouds zu wissen. üëç Ich will dir jetzt eine ganz besondere Cloud vorstellen: die HPI Schul-Cloud!</p>"
                } else {
                    gameOverHTML += "<p>Clouds scheinen f√ºr dich noch neu zu sein. üòâ Ich will dir jetzt eine ganz besondere Cloud vorstellen: die HPI Schul-Cloud!</p>"
                }
                gameOverHTML += "<p>Hier ein kleines Video dazu.</p>"
                var element = document.getElementById("quiz");
                element.innerHTML = gameOverHTML;
                addCloudyDialogPrimaryButton('Video starten');
                $("input.btn.btn-primary").click(function () {
                    $("input.btn.btn-primary").unbind("click");
                    removeCloudyDialog();
                    doOverlayDarken(true);
                    nextGameStage(3);
                });
            };

            // create questions here
            var questions = [
                new Question("Was bedeutet PC?", ["Personal Computer", "PogChamp", "Power Chip"], "Personal Computer"),
                new Question("Was ist eine Cloud?", ["Eine Bereitstellung von Speicherplatz, Software und Rechenleistungen √ºber das Internet", "Wolkenf√∂rmige Zuckerwatte", "Sichere Messenger Alternative"], "Eine Bereitstellung von Speicherplatz, Software und Rechenleistungen √ºber das Internet"),
                new Question("Was ist ein Vorteil einer Cloud?", ["Clouds bieten Datenzugriff von √ºberall aus", "Durch Clouds hat man unbegrenzte mobile Daten", "Sie k√∂nnen nicht gehackt werden"], "Clouds bieten Datenzugriff von √ºberall aus"),
                new Question("Was ist ein weiterer Vorteil einer Cloud?", ["Clouds sind unabh√§ngig vom Internet", "√úber Clouds ist eine Zusammenarbeit mit anderen m√∂glich", "Stromsparende Alternative zu Servern"], "√úber Clouds ist eine Zusammenarbeit mit anderen m√∂glich"),
                new Question("Wie viel Prozent deutscher Unternehmen benutzten im Jahr 2019 eine Cloud?", ["18 %", "73 %", "52 %"], "73 %"),
            ];

            // create quiz
            var quiz = new Quiz(questions);

            // display quiz
            populate();
        }
        if (gameStage == "3") {
            addOverlay(true);
            $('#entercontainer').append('<canvas id=\"myCanvasMatrix\" style=\" position: absolute; width: 100%; height: 100%;\"></canvas><video width=\"320\" height=\"240\" controls=\"\" autoplay=\"\" src=\" https://s3.hidrive.strato.com/schul-cloud-hpi/global/Medien/EnterTheCloud-IntoVideoKurz.mp4\" type=\"video/mp4\"  style=\"width: 95%;max-width: 600px;\" id=\"enterthecloudvideo\"></video>');
            let vid = document.getElementById("enterthecloudvideo");
            let videoFunction = () => {
                removeInfoFooter();
                if (!vid.paused) {
                    vid.pause();
                }
                var c1 = document.getElementById("myCanvasMatrix");
                var ctx1 = c1.getContext("2d");
                var Matrix = function () {
                    ctx1.fillStyle = 'rgba(0,0,0,.05)';
                    ctx1.fillRect(0, 0, 500, 500);
                    ctx1.fillStyle = "#0f0";
                    ctx1.fillText('Cloud Hacking Attack!', Math.random() * (500), Math.random() * (500));
                };
                setInterval(Matrix, 100);
                $(vid).css({
                    display: "none"
                });
                $('#entercontainer').append('<img id="theImg" style=\"z-index: 12\"src="' + hackerImageData + '" />')
                $('#entercontainer').append('<div id=\"enterthecloudfooter\" style=\"position: absolute;background: black;bottom: 0;left: 0;right: 0;box-shadow: 0px 3px 15px lightgrey, 0 0 11px lightgreen;width: 95%;max-width: 700px;margin: auto;color: green;padding: 10px;z-index: 13; min-height: 150px;\"><p>&gt;_ Hacker Message:</p><p id=\"hacker_textchat\"></p></div>');
                hackerWriting('Was w√§re das Internet ohne Trolle?~Was w√§re Schule ohne technische Pannen?~Diese Cloud-Tour ist vorbei, bevor sie angefangen hat!~ MUHAHAHAHAHAHAA! üëø');

            }

            addInfoFooter();
            $('#infofootercontainer p').remove()
            $('#infofootercontainer').append("<input type=\"button\" class=\"btn btn-primary form-control\" value=\"SKIP Video\" id=\"skipButton\">")
            $("input#skipButton").click(function () {
                videoFunction();
            });
            vid.ontimeupdate = function () {
                if (vid.currentTime > 10) {
                    videoFunction();
                }
            };
        }
        if (gameStage == "4") {
            addOverlay();
            addCloudyDialog();
            addCloudyDialogText("Oh Nein! üò± \n Es wird versucht, ins System einzudringen! üò§ \n Kannst du mir helfen, den Hacker-Angriff abzuwehren?");
            addCloudyDialogSecondaryButton('Nein');
            addCloudyDialogPrimaryButton('Ja');
            $("input.btn.btn-primary").unbind("click").click(function () {
                addCloudyDialogText("Cool! Lass uns das System verteidigen! üòé");
                addCloudyDialogPrimaryButton('Na dann mal weiter!');
                $("input.btn.btn-primary").unbind("click").click(function () {
                    addCloudyDialogText("Ich habe Sorge, dass wir abgeh√∂rt werden. Deswegen habe ich meine Nachricht an dich verschl√ºsselt. \n Um sie zu entschl√ºsseln, gehe in den Bereich ‚ÄúDateien‚Äù > ‚Äúmeine pers√∂nlichen Dateien‚Äù. \n \n √úbrigens: im unteren Bereich des Bildschirms k√∂nnt ihr immer die aktuellen Schritte nachverfolgen. üëá");
                    addInfoFooter("Aufgabe: Bereich Meine Dateien > Meine pers√∂nlichen Dateien > ‚ÄúNachricht entschl√ºsseln‚Äù √∂ffnen");
                    addCloudyDialogPrimaryButton('Go!');
                    $("input.btn.btn-primary").click(function () {
                        removeOverlay();
                        nextGameStage(5);
                    });
                });
            });
            $("input.btn.btn-secondary").click(function () {
                addCloudyDialogText("Ich brauche aber deine Hilfe. üòá Komm, wir schaffen das! üòé")
                removeCloudyDialogSecondaryButton();
                addCloudyDialogPrimaryButton('Alles klar!');
            });
        }
        if (gameStage == "5") {
            addInfoFooter("Aufgabe: Bereich Dateien > meine pers√∂nlichen Dateien > Ordner ‚ÄúNachricht entschl√ºsseln √∂ffnen‚Äù > Bild √∂ffnen > Nachricht entschl√ºsseln!");
            window.onpopstate = function (event) {
                if (location.hash.match("#file-view")) {
                    nextGameStage(6);
                }
            };
        }
        if (gameStage == "6") {
            if (location.pathname.match("/homework/")) {
                addOverlay();
                addCloudyDialog();
                addCloudyDialogText("Aloha! \n Cool, du hast meine Nachricht also entschl√ºsselt. üëè \n Hier im Bereich ‚ÄúAufgaben‚Äù habe ich alle Schritte zusammengefasst, die wichtig sind, um die Attacke abzuwenden! Unter dem Punkt ‚ÄòN√§chste Schritte‚Äô sage ich dir, wie wir weitermachen.");
                addCloudyDialogPrimaryButton('Ok!');
                $("input.btn.btn-primary").click(function () {
                    removeOverlay();
                    addInfoFooter("Gehe zu: ‚ÄòN√§chste Schritte‚Äô");
                    nextGameStage(7);
                });
            }
        }
        if (gameStage == "7") {
            addInfoFooter("Gehe zu: ‚ÄòN√§chste Schritte‚Äô");
            if (location.pathname.match("/homework/") && $('h1#page-title').text().match("N√§chste Schritte")) {
                nextGameStage(8);
            }
        }
        if (gameStage == "8") {
            if (location.pathname.match("/news/")) {
                addOverlay();
                addCloudyDialog();
                addCloudyDialogText("Willkommen bei den Neuigkeiten!\nDer Hacker hat sich ein bisschen an den √úberschriften ausgetobt. üòµ\nDabei sollte dir auch eine √úberschrift auffallen, die etwas mit dem Hackerangriff zu tun hat. Schaue im dazugeh√∂rigen Artikel nach weiteren Informationen und Anweisungen.");
                addCloudyDialogPrimaryButton('Mach ich!');
                $("input.btn.btn-primary").click(function () {
                    removeOverlay();
                    nextGameStage(9);
                });
            }
        }
        if (gameStage == "9") {
            addInfoFooter("Gehe zu: Neuigkeiten > √∂ffne den Artikel √ºber Hacker!");
            if (location.pathname.match("/news/") && $('h1#page-title').text() === "Wtllroeve Shsneiwei √ºreb Kheacr-Vhrlateen nfgdeune") {
                setTimeout(function () {
                    addOverlay();
                    addCloudyDialog();
                    addCloudyDialogText("Jackpot! \n Ich konnte Zugriff auf die Webcam des Hackers gewinnen. Wenn wir das Master-Passwort herausfinden, k√∂nnen wir seinen Angriff abwehren. \n \n Versucht, das Master-Passwort zu knacken. Es ist der Lieblingsgegenstand des Hackers, welchen er immer bei sich tr√§gt.  üëÄ");
                    addCloudyDialogPrimaryButton('Ok!');
                    $("input.btn.btn-primary").click(function () {
                        removeOverlay();
                        nextGameStage(10);
                    })
                }, 5000);
            }
        }
        if (gameStage == "10") {
            addInfoFooter("Gehe zum Bereich: Kurse > Wie man Hacker stoppt > Webcam Bilder. Gebe das Master-Passwort hier ein:");
            $('#infofootercontainer').append("<input type=\"text\" id=\"inputPassword\" class=\"form-control\" style=\"margin-bottom: 8px;\"> <input type=\"button\" class=\"btn btn-primary form-control\" value=\"Passwort pr√ºfen\" id=\"checkButton\">")
            $("input#checkButton").click(function () {
                if ($('input#inputPassword').val().toLowerCase().match(/^(handy|smartphone|derger√§t|telefon)$/)) {
                    removeInfoFooter();
                    addOverlay();
                    addCloudyDialog();
                    addCloudyDialogText("Yeah! Gut gemacht!\n \nGehe nun in den Bereich Kurse und besuche den Kurs ‚ÄòWie man Hacker stoppt‚Äô.");
                    addCloudyDialogPrimaryButton('Ok!');
                    $("input.btn.btn-primary").click(function () {
                        removeOverlay();
                        nextGameStage(11);
                    });
                } else {
                    $('input#inputPassword').css("background-color", "rgba(255,0,0,0.2)")
                    addInfoFooter("Leider war das nicht das gesuchte Wort. Bitte finde das richtige Passwort und gebe es hier ein:");
                }
            });
        }
        if (gameStage == "11") {
            addOverlay();
            addCloudyDialog();
            addCloudyDialogText("Gehe nun zu den Werkzeugen und √∂ffne Geogebra.\nWenn du die Gleichung dort l√∂st, k√∂nnen wir die geografische Position des Hackers bestimmen! üìç\n");
            addCloudyDialogPrimaryButton('Ok!');
            $("input.btn.btn-primary").click(function () {
                removeOverlay();
                nextGameStage(12);
            });
        }
        if (gameStage == "12") {
            addInfoFooter("Gehe zum Bereich: Kurse > Wie man Hacker stoppt > Finde die Position des Hackers > Werte aus Aufgabentext in Geogebra eingeben > X-Wert hier eingeben");
            $('#infofootercontainer').append("<input type=\"text\" id=\"inputGeolocation\" class=\"form-control\" style=\"margin-bottom: 8px;\"> <input type=\"button\" class=\"btn btn-primary form-control\" value=\"Position pr√ºfen!\" id=\"checkButton\">")
            $("input#checkButton").click(function () {
                if ($('input#inputGeolocation').val().toLowerCase().match(/^(2)$/)) {
                    removeInfoFooter();
                    addOverlay();
                    addCloudyDialog();
                    addCloudyDialogText("Ich habe die Daten ausgewertet, und siehe da: der Angriff wurde 20 Meter von deiner aktuellen Position aus ausgef√ºhrt! üò≤");
                    addCloudyDialogPrimaryButton('Ok, krass!');
                    $("input.btn.btn-primary").click(function () {
                        removeOverlay();
                        nextGameStage(13);
                    });
                } else {
                    $('input#inputGeolocation').css("background-color", "rgba(255,0,0,0.2)")
                    addInfoFooter("Leider war das nicht der gesuchte X-Wert um die Position zu bestimmen. Bitte finde de richtigen X-Wert und gebe ihn hier ein:");
                }
            });
        }
        if (gameStage == "13") {
            addOverlay();
            $('#entercontainer').append('<canvas id=\"myCanvasMatrix\" style=\" position: absolute; width: 100%; height: 100%;\"></canvas>');
            var c1 = document.getElementById("myCanvasMatrix");
            var ctx1 = c1.getContext("2d");
            var Matrix = function () {
                ctx1.fillStyle = 'rgba(0,0,0,.05)';
                ctx1.fillRect(0, 0, 500, 500);
                ctx1.fillStyle = "#0f0";
                ctx1.fillText('Cloud Hacking Attack!', Math.random() * (500), Math.random() * (500));
            };
            setInterval(Matrix, 100);
            $('#entercontainer').append('<img id="theImg" style=\"z-index: 12\"src="' + hackerImageData + '" />')
            $('#entercontainer').append('<div id=\"enterthecloudfooter\" style=\"position: absolute;background: black;bottom: 0;left: 0;right: 0;box-shadow: 0px 3px 15px lightgrey, 0 0 11px lightgreen;width: 95%;max-width: 700px;margin: auto;color: green;padding: 10px;z-index: 13; min-height: 150px;\"><p>&gt;_ Hacker Message:</p><p id=\"hacker_textchat\"></p></div>');
            hackerWriting('Ok, ok, ok. Ihr habt mich erwischt.~ Ich bin eine Sch√ºlerin aus der Klasse unter euch ‚Ä¶ Ich wollte die Cloud hacken, um alle eure Hausaufgaben und Referate abzugreifen, damit ich n√§chstes Jahr weniger Arbeit habe ‚Ä¶ üí©');
        }
        if (gameStage == "14") {
            addOverlay();
            $('#entercontainer').append('<canvas id=\"myCanvasMatrix\" style=\" position: absolute; width: 100%; height: 100%;\"></canvas>');
            addCloudyDialog();
            addCloudyDialogText("Ciao Kakao, Ende Gel√§nde, Tsch√ºssikowsky, t√ºdel√º! \nDer Hacker ist dank euch offiziell von der Cloud verbannt! üí•");
            addCloudyDialogPrimaryButton('Super!');
            $("input.btn.btn-primary").click(function () {
                addCloudyDialogText("Du bist hammerm√§√üig! Du hast es geschafft die Cloud zu retten und ganz nebenbei viele der Funktionen kennengelernt. üòâ\n\n In diesem Spiel wird zwar ein Hacker-Angriff simuliert ‚Äì aber eines der obersten Prinzipien der HPI-Schul-Cloud ist die digitale Sicherheit. So einfach, wie wir es hier dargestellt haben, kann man uns nicht hacken!");
                addCloudyDialogPrimaryButton('Weiter!');
                $("input.btn.btn-primary").unbind("click").click(function () {
                    addCloudyDialogText("Falls ihr mal Probleme mit der HPI Schul-Cloud haben solltet, macht nicht eure Lehrer daf√ºr verantwortlich. Wir haben einen Hilfebereich und freuen uns sehr, wenn ihr uns Feedback gebt!");
                    addCloudyDialogPrimaryButton('Weiter!');
                    $("input.btn.btn-primary").unbind("click").click(function () {
                        addCloudyDialogText("Noch zuletzt: Ihr habt noch keinen offiziellen Zugang zur HPI Schul-Cloud.\n Wenn ihr unter 16 Jahre alt seid, braucht ihr daf√ºr eine offizielle Einverst√§ndniserkl√§rung eurer Eltern. üòä \n Um also mit der Cloud durchstarten zu k√∂nnen, k√ºmmert euch schnell darum - dann kann hoffentlich ganz bald digital gearbeitet werden! Viel Spa√ü dabei!\n Cloudy  ‚úå");
                        addCloudyDialogPrimaryButton('Ende des Spiels!');
                        $("input.btn.btn-primary").unbind("click").click(function () {
                            removeOverlay();
                            nextGameStage(15);
                        })
                    });
                });

            });

            // when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
            // not supported in all browsers though and sometimes needs a prefix, so we need a shim
            window.requestAnimFrame = (function () {
                return window.requestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    function (callback) {
                        window.setTimeout(callback, 1000 / 60);
                    };
            })();

            // now we will setup our basic variables for the demo
            var canvas = document.getElementById('myCanvasMatrix'),
                ctx = canvas.getContext('2d'),
                // full screen dimensions
                cw = window.innerWidth,
                ch = window.innerHeight,
                // firework collection
                fireworks = [],
                // particle collection
                particles = [],
                // starting hue
                hue = 120,
                // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
                limiterTotal = 5,
                limiterTick = 3,
                // this will time the auto launches of fireworks, one launch per 80 loop ticks
                timerTotal = 40,
                timerTick = 0,
                mousedown = false,
                // mouse x coordinate,
                mx,
                // mouse y coordinate
                my;

            // set canvas dimensions
            canvas.width = cw;
            canvas.height = ch;

            // now we are going to setup our function placeholders for the entire demo

            // get a random number within a range
            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            // calculate the distance between two points
            function calculateDistance(p1x, p1y, p2x, p2y) {
                var xDistance = p1x - p2x,
                    yDistance = p1y - p2y;
                return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
            }

            // create firework
            function Firework(sx, sy, tx, ty) {
                // actual coordinates
                this.x = sx;
                this.y = sy;
                // starting coordinates
                this.sx = sx;
                this.sy = sy;
                // target coordinates
                this.tx = tx;
                this.ty = ty;
                // distance from starting point to target
                this.distanceToTarget = calculateDistance(sx, sy, tx, ty);
                this.distanceTraveled = 0;
                // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
                this.coordinates = [];
                this.coordinateCount = 3;
                // populate initial coordinate collection with the current coordinates
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = 10;
                this.acceleration = 1.05;
                this.brightness = random(50, 70);
                // circle target indicator radius
                this.targetRadius = 5;
            }

            // update firework
            Firework.prototype.update = function (index) {
                // remove last item in coordinates array
                this.coordinates.pop();
                // add current coordinates to the start of the array
                this.coordinates.unshift([this.x, this.y]);

                // cycle the circle target indicator radius
                if (this.targetRadius < 8) {
                    this.targetRadius += 0.3;
                } else {
                    this.targetRadius = 1;
                }

                // speed up the firework
                this.speed *= this.acceleration;

                // get the current velocities based on angle and speed
                var vx = Math.cos(this.angle) * this.speed,
                    vy = Math.sin(this.angle) * this.speed;
                // how far will the firework have traveled with velocities applied?
                this.distanceTraveled = calculateDistance(this.sx, this.sy, this.x + vx, this.y + vy);

                // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
                if (this.distanceTraveled >= this.distanceToTarget) {
                    createParticles(this.tx, this.ty);
                    // remove the firework, use the index passed into the update function to determine which to remove
                    fireworks.splice(index, 1);
                } else {
                    // target not reached, keep traveling
                    this.x += vx;
                    this.y += vy;
                }
            }

            // draw firework
            Firework.prototype.draw = function () {
                ctx.beginPath();
                // move to the last tracked coordinate in the set, then draw a line to the current x and y
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = 'hsl(' + hue + ', 100%, ' + this.brightness + '%)';
                ctx.stroke();

                ctx.beginPath();
                // draw the target for this firework with a pulsing circle
                ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
                ctx.stroke();
            }

            // create particle
            function Particle(x, y) {
                this.x = x;
                this.y = y;
                // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
                this.coordinates = [];
                this.coordinateCount = 5;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                // set a random angle in all possible directions, in radians
                this.angle = random(0, Math.PI * 2);
                this.speed = random(1, 10);
                // friction will slow the particle down
                this.friction = 0.95;
                // gravity will be applied and pull the particle down
                this.gravity = 1;
                // set the hue to a random number +-50 of the overall hue variable
                this.hue = random(hue - 50, hue + 50);
                this.brightness = random(50, 80);
                this.alpha = 1;
                // set how fast the particle fades out
                this.decay = random(0.015, 0.03);
            }

            // update particle
            Particle.prototype.update = function (index) {
                // remove last item in coordinates array
                this.coordinates.pop();
                // add current coordinates to the start of the array
                this.coordinates.unshift([this.x, this.y]);
                // slow down the particle
                this.speed *= this.friction;
                // apply velocity
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                // fade out the particle
                this.alpha -= this.decay;

                // remove the particle once the alpha is low enough, based on the passed in index
                if (this.alpha <= this.decay) {
                    particles.splice(index, 1);
                }
            }

            // draw particle
            Particle.prototype.draw = function () {
                ctx.beginPath();
                // move to the last tracked coordinates in the set, then draw a line to the current x and y
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
                ctx.stroke();
            }

            // create particle group/explosion
            function createParticles(x, y) {
                // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
                var particleCount = 30;
                while (particleCount--) {
                    particles.push(new Particle(x, y));
                }
            }

            // main demo loop
            function loop() {
                // this function will run endlessly with requestAnimationFrame
                requestAnimFrame(loop);

                // increase the hue to get different colored fireworks over time
                //hue += 0.5;

                // create random color
                hue = random(0, 360);

                // normally, clearRect() would be used to clear the canvas
                // we want to create a trailing effect though
                // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
                ctx.globalCompositeOperation = 'destination-out';
                // decrease the alpha property to create more prominent trails
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, cw, ch);
                // change the composite operation back to our main mode
                // lighter creates bright highlight points as the fireworks and particles overlap each other
                ctx.globalCompositeOperation = 'lighter';

                // loop over each firework, draw it, update it
                var i = fireworks.length;
                while (i--) {
                    fireworks[i].draw();
                    fireworks[i].update(i);
                }

                // loop over each particle, draw it, update it
                i = particles.length;
                while (i--) {
                    particles[i].draw();
                    particles[i].update(i);
                }

                // launch fireworks automatically to random coordinates, when the mouse isn't down
                if (timerTick >= timerTotal) {
                    if (!mousedown) {
                        // start the firework at the bottom middle of the screen, then set the random target coordinates, the random y coordinates will be set within the range of the top half of the screen
                        fireworks.push(new Firework(cw / 2, ch, random(0, cw), random(0, ch / 2)));
                        timerTick = 0;
                    }
                } else {
                    timerTick++;
                }

                // limit the rate at which fireworks get launched when mouse is down
                if (limiterTick >= limiterTotal) { } else {
                    limiterTick++;
                }
            }

            // mouse event bindings
            // update the mouse coordinates on mousemove

            // once the window loads, we are ready for some fireworks!
            loop();
        }
    };
    main();
})();